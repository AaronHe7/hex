(this.webpackJsonphexjs=this.webpackJsonphexjs||[]).push([[0],{18:function(e,t,i){"use strict";i.r(t);var s=i(1),n=i.n(s),a=i(10),r=i.n(a),h=i(2),c=i(4),l=i(5),o=i(12),u=i(11),f=i(9),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:11,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:11;Object(c.a)(this,e),this.WIDTH=t,this.HEIGHT=i,this.currentPlayer=1,this.gameOver=!1,this.winner=0,this.board=new Array(this.HEIGHT),this.searched=new Array(this.HEIGHT),this.searchedQueue=[];for(var s=0;s<this.HEIGHT;s++)this.board[s]=new Array(this.WIDTH).fill(0),this.searched[s]=new Array(this.WIDTH).fill(!1)}return Object(l.a)(e,[{key:"move",value:function(e,t){if(0!==this.board[e][t]||this.gameOver||!this.inBound(e,t))return!1;this.board[e][t]=this.currentPlayer,this.findWin(e,t)&&(this.winner=this.currentPlayer,this.gameOver=!0),this.currentPlayer*=-1}},{key:"findConnection",value:function(e,t,i){var s,n=this.dfs(e,t,i),a=Object(f.a)(this.searchedQueue);try{for(a.s();!(s=a.n()).done;){var r=s.value;this.searched[r[0]][r[1]]=!1}}catch(h){a.e(h)}finally{a.f()}return this.searchedQueue=[],n}},{key:"dfs",value:function(e,t,i){if(!this.inBound(e,t)||this.board[e][t]!==this.currentPlayer)return!1;if(i(e,t))return!0;var s=!1,n=this.neighbors(e,t);this.searched[e][t]=!0,this.searchedQueue.push([e,t]);var a,r=Object(f.a)(n);try{for(r.s();!(a=r.n()).done;){var c=a.value;if(this.inBound.apply(this,Object(h.a)(c))&&!this.searched[c[0]][c[1]]&&this.dfs.apply(this,Object(h.a)(c).concat([i]))){s=!0;break}}}catch(l){r.e(l)}finally{r.f()}return s}},{key:"inBound",value:function(e,t){return e>=0&&t>=0&&e<this.HEIGHT&&t<this.WIDTH}},{key:"neighbors",value:function(e,t){return[[e-1,t],[e-1,t+1],[e,t+1],[e+1,t],[e+1,t-1],[e,t-1]]}},{key:"connectTop",value:function(e,t){return e<=0}},{key:"connectBottom",value:function(e,t){return e>=this.HEIGHT-1}},{key:"connectLeft",value:function(e,t){return t<=0}},{key:"connectRight",value:function(e,t){return t>=this.WIDTH-1}},{key:"findWin",value:function(e,t){var i,s,n=this;this.currentPlayer>0?(i=function(e,t){return n.connectTop(e,t)},s=function(e,t){return n.connectBottom(e,t)}):(i=function(e,t){return n.connectLeft(e,t)},s=function(e,t){return n.connectRight(e,t)});var a=this.findConnection(e,t,i),r=this.findConnection(e,t,s);return a&&r}}]),e}(),v=i(3),x=i.n(v),b=function(){function e(t){Object(c.a)(this,e),this.hex=t}return Object(l.a)(e,[{key:"move",value:function(){for(var e,t=[],i=0;i<this.hex.HEIGHT;i++)for(var s=0;s<this.hex.WIDTH;s++)this.hex.board[i][s]||t.push([i,s]);t.length&&(e=this.hex).move.apply(e,Object(h.a)(t[Math.floor(Math.random()*t.length)]))}}]),e}(),j=i(0),y=function(e){Object(o.a)(i,e);var t=Object(u.a)(i);function i(e){var s;return Object(c.a)(this,i),(s=t.call(this,e)).canvasRef=n.a.createRef(),s.statusRef=n.a.createRef(),s.statusRef2=n.a.createRef(),s.heightRef=n.a.createRef(),s.widthRef=n.a.createRef(),s.redRef=n.a.createRef(),s.blueRef=n.a.createRef(),s}return Object(l.a)(i,[{key:"isInteger",value:function(e){for(var t=0;t<e.length;t++)if(!"0123456789".includes(e[t]))return!1;return e.length>0&&0!==parseInt(e)}},{key:"componentDidMount",value:function(){var e=this;this.canvas=this.canvasRef.current,this.ctx=this.canvas.getContext("2d"),this.WHITE=[255,255,255],this.BLACK=[0,0,0],this.RED=[255,0,0],this.BLUE=[0,0,255],this.interval=setInterval((function(){e.update(),e.draw()}),1e3/30);var t=this;this.canvas.addEventListener("click",(function(e){var i=t.canvas.getBoundingClientRect(),s=t.canvas.width/i.width,n=t.canvas.height/i.height,a=s*(e.clientX-i.left),r=n*(e.clientY-i.top);t.mousePressed(a,r)}))}},{key:"startGame",value:function(){if(this.isInteger(this.heightRef.current.value)&&this.isInteger(this.widthRef.current.value)){this.aiRed=this.redRef.current.value,this.aiBlue=this.blueRef.current.value;var e=parseInt(this.heightRef.current.value),t=parseInt(this.widthRef.current.value);this.hex=new d(e,t),this.hexagons=new Array(this.hex.HEIGHT),this.cellSize=80;for(var i=0;i<this.hex.HEIGHT;i++){this.hexagons[i]=new Array(this.hex.WIDTH);for(var s=0;s<this.hex.WIDTH;s++){this.hexagons[i][s]=[];for(var n=this.getCenter(i,s),a=0;a<6;a++){var r=a*Math.PI/3+Math.PI/2;this.hexagons[i][s].push([n[0]+this.cellSize*Math.cos(r),n[1]-this.cellSize*Math.sin(r)])}}}}}},{key:"getCenter",value:function(e,t){var i=Math.sin(Math.PI/3);return[1.5*this.cellSize+e*this.cellSize*i+2*t*this.cellSize*i,1.5*this.cellSize+e*this.cellSize*3/2]}},{key:"drawCell",value:function(e,t){this.ctx.strokeStyle="black",this.ctx.lineWidth=2;var i=this.hexagons[e][t];this.ctx.beginPath();for(var s=0;s<6;s++){var n,a;(n=this.ctx).moveTo.apply(n,Object(h.a)(i[s])),(a=this.ctx).lineTo.apply(a,Object(h.a)(i[(s+1)%6]))}this.ctx.stroke(),this.ctx.lineWidth=5;for(var r=0;r<6;r++){var c,l,o,u,f=[[i[r][0],i[r][1]],[i[(r+1)%6][0],i[(r+1)%6][1]]],d=0===e&&(0===r||5===r),v=e===this.hex.HEIGHT-1&&(2===r||3===r),x=0===t&&(1===r||2===r),b=t===this.hex.WIDTH-1&&(4===r||5===r);if(d||v)this.ctx.strokeStyle="red",this.ctx.beginPath(),(c=this.ctx).moveTo.apply(c,Object(h.a)(f[0])),(l=this.ctx).lineTo.apply(l,Object(h.a)(f[1])),this.ctx.stroke();if(x||b)this.ctx.strokeStyle="blue",this.ctx.beginPath(),(o=this.ctx).moveTo.apply(o,Object(h.a)(f[0])),(u=this.ctx).lineTo.apply(u,Object(h.a)(f[1])),this.ctx.stroke()}}},{key:"draw",value:function(){if(this.hex){this.ctx.fillStyle="white",this.ctx.rect(0,0,this.canvas.width,this.canvas.height),this.ctx.fill();for(var e=0;e<this.hex.HEIGHT;e++)for(var t=0;t<this.hex.WIDTH;t++){this.ctx.fillStyle="white",this.drawCell(e,t);var i,s=this.getCenter(e,t),n=void 0;switch(this.hex.board[e][t]){case 1:n="red";break;case-1:n="blue"}if(n)this.ctx.strokeStyle="black",this.ctx.lineWidth=5,this.ctx.beginPath(),(i=this.ctx).arc.apply(i,Object(h.a)(s).concat([this.cellSize/2,0,2*Math.PI])),this.ctx.stroke(),this.ctx.fillStyle=n,this.ctx.fill()}}}},{key:"update",value:function(){var e=this.statusRef.current,t=this.statusRef2.current;this.hex?(this.move(),this.hex.gameOver?(e.textContent="".concat(this.hex.winner>0?"Red":"Blue"),t.textContent=" Wins"):(e.textContent="".concat(this.hex.currentPlayer>0?"Red":"Blue"),t.textContent="'s Turn",this.hex.currentPlayer>0?(e.classList.remove(x.a.blue),e.classList.add(x.a.red)):(e.classList.remove(x.a.red),e.classList.add(x.a.blue)))):e.textContent=t.textContent=""}},{key:"move",value:function(){if(!this.hex.gameOver){var e,t=1==this.hex.currentPlayer?this.aiRed:this.aiBlue;if("manual"!==t){switch(t){case"random":e=new b(this.hex)}console.log(t),e.move()}}}},{key:"getCell",value:function(e,t){for(var i=0;i<this.hex.HEIGHT;i++)for(var s=0;s<this.hex.WIDTH;s++){var n=this.getCenter(i,s);if(Math.pow(e-n[0],2)+Math.pow(t-n[1],2)<=3/4*Math.pow(this.cellSize,2))return[i,s]}}},{key:"mousePressed",value:function(e,t){var i,s=this.getCell(e,t);void 0!==s&&(i=this.hex).move.apply(i,Object(h.a)(s))}},{key:"render",value:function(){var e=this;return Object(j.jsxs)("div",{class:x.a.container,children:[Object(j.jsxs)("div",{class:x.a.controls,children:[Object(j.jsx)("label",{for:"height",children:"Height:"}),Object(j.jsx)("input",{type:"number",min:"1",name:"height",id:"height",ref:this.heightRef,defaultValue:"6"}),Object(j.jsx)("label",{for:"width",children:"Width:"}),Object(j.jsx)("input",{type:"number",min:"1",name:"width",id:"width",ref:this.widthRef,defaultValue:"6"}),Object(j.jsx)("br",{}),Object(j.jsx)("label",{for:"red",children:"Red:"}),Object(j.jsxs)("select",{name:"red",id:"red",ref:this.redRef,children:[Object(j.jsx)("option",{value:"manual",children:"Manual"}),Object(j.jsx)("option",{value:"random",children:"Random"})]}),Object(j.jsx)("br",{}),Object(j.jsx)("label",{for:"blue",children:"Blue:"}),Object(j.jsxs)("select",{name:"blue",id:"blue",ref:this.blueRef,children:[Object(j.jsx)("option",{value:"manual",children:"Manual"}),Object(j.jsx)("option",{value:"random",children:"Random"})]}),Object(j.jsx)("br",{}),Object(j.jsx)("button",{onClick:function(){return e.startGame()},children:"Start game"})]}),Object(j.jsxs)("div",{class:x.a.game,children:[Object(j.jsx)("span",{ref:this.statusRef,className:x.a.status}),Object(j.jsx)("span",{ref:this.statusRef2,className:x.a.status}),Object(j.jsx)("br",{}),Object(j.jsx)("canvas",{ref:this.canvasRef,width:"2400",height:"1600",style:{width:"60vw"}})]})]})}}]),i}(s.Component);var g=function(){return Object(j.jsx)(y,{})};r.a.render(Object(j.jsx)(n.a.StrictMode,{children:Object(j.jsx)(g,{})}),document.getElementById("root"))},3:function(e,t,i){e.exports={status:"game_status__2JA7C",red:"game_red__AsdVU",blue:"game_blue__2EDZp",container:"game_container__2ViGJ",controls:"game_controls__2ZQJd"}}},[[18,1,2]]]);
//# sourceMappingURL=main.c3bd8113.chunk.js.map